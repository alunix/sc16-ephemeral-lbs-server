<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8"></meta>
	<!-- style imports -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
	<link href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" rel="stylesheet">
	<link href="/css/style.css" rel="stylesheet">
	<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
	<link rel="stylesheet" href="http://leaflet.github.io/Leaflet.draw/lib/leaflet/leaflet.css" />
	<link rel="stylesheet" href="http://leaflet.github.io/Leaflet.draw/leaflet.draw.css" />
	<link href="/css/datetimepicker.css" rel="stylesheet">

	<!-- library imports -->
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.22/vue.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/0.7.0/vue-resource.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
	<script type="text/javascript" src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
	<script type="text/javascript" src="http://leaflet.github.io/Leaflet.draw/leaflet.draw.js"></script>
	<script type="text/javascript" src="http://leaflet.github.io/Leaflet.draw/lib/leaflet/leaflet.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw-src.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.min.js"></script>
	<script type="text/javascript" src="../source/jquery.datetimepicker.full.min.js"></script>
	<script type="text/javascript" src="../source/leaflet-pip.min.js"></script>
	<script type="text/javascript" src="../source/geojson.min.js"></script>
	<!--Just keep it in here, maybe I need it for some calendar stuff, otherwise I remove it-->
	<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>-->


</head>

<body>
	<!-- Navigation -->
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#topbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				<a class="navbar-brand" href="index.html">Home</a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="topbar">
				<ul class="nav navbar-nav">
					<li>
						<a href="help.html">Help</a>
					</li>
					<li>
						<a href="about.html">About</a>
					</li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<!-- Page Content -->
	<div class="container">
		<!-- /.row -->
		<div class="row">
			<div id="map" class="col-md-6">
				<button id="toggleeditbtn" v-if="button_shown" type="button" class="btn-lg btn-primary" v-on:click="start_editing">Add new zone</button>
			</div>
			<div id="contentbox" class="col-md-3">
				<div id="search" v-cloak>
					<input type="text" class="form-control" placeholder="Search" v-model="search" debounce="500"></input>
					<div v-if="state" id="search_results">
						<div v-for="zone in result">
							<searchresult :name="zone.Name" :id="zone['Zone-id']" :topics="zone.Topics">
						</div>
					</div>
				</div>
				<div id="welcome">
					<welcome v-if="state"></welcome>
				</div>
				<div id="zonearea" v-cloak>
					<zoneinfo v-if="state" :name="zone.Name" :expire="zone['Expired-at']" :topic="zone.Topics"></zoneinfo>
					<canvas v-show="state" id="zoneChart"></canvas>
					<messageinfo v-if="state" v-for="message in messages" :title="message.Title" :topic="message.Topic" :message="message.Message"></messageinfo>
				</div>
				<div id="addzone">
					<addzone v-if="state"> </addzone>
					<datetime-input v-if="state">
						</datetime-input/>
				</div>
			</div>
		</div>
	</div>
	<!-- /.container -->
	<template id="add-zone-template">
		<h3>Create Zone</h3>
		<form id="createZoneform">
			<label for="zonename">Zonename</label>
			<input class="form-control" type="text" v-model="name" id="zonename" maxlength="30" required>

			<label for="duration">Duration</label>
			<input class="form-control" type="text" placeholder="Date &amp; time" id="duration" v-model="datemodel" v-el:input required></br>

			<label for="topics">Topics</label>
			<input class="form-control" type="text" v-model="topicmodel" id="topics" maxlength="50">
			<a class="btn btn-success" href="#" v-on:click="addTopic()" role="button">add topic</a>
			<a class="btn btn-danger" href="#" v-on:click="deleteTopic()" role="button">delete topic</a>
			<br>
			<b><p id="topicPreview" ></p></b>
			<br>

			<label for="area">Zone</label>
			<input class="form-control" type="text" v-model="coordinatesmodel" id="area" readonly required>
			<!--			<button class="btn btn-default">Get Zone from the Map</button> <br>-->
			<a class="btn btn-default" href="#" form="createZoneform" type="reset" role="button" v-on:click="reset">Reset</a>
			<a class="btn btn-success" href="#" v-on:click="submitzone" role="button">Submit</a>
			<a class="btn btn-danger" href="#" id="closeCreateZone" v-on:click="cancel" role="button"> Cancel</a>
		</form>
	</template>
	<template id="message-info-template">
		<ul class="list-group">
			<li class="list-group-item"><span class="badge">{{topic}}</span> {{ title }} </li>
			<li class="list-group-item"> {{ message }} </li>
		</ul>
	</template>
	<template id="search-result-template">
		<div v-on:click="selectZone">
			{{name}}<br> {{id}}
			<br> {{topics}}
		</div>
	</template>
	<template v-if="state" id="zone-info-template">
		<div class="panel panel-default">
			<div class="panel-heading">{{name}}</div>
			<div class="panel-body">{{expire}}</br>{{topic}}</div>
		</div>
	</template>
	<template id="welcome-template">
		<h1>An Ephemeral Experience</h1>
		<h3>Explore the map!</h3>
		<p>Find help in the bar above!</p>
	</template>
</body>
<script type="text/javascript" src="js/vue_broadcaster.js"></script>
<script type="text/javascript" src="js/welcomeVue.js"></script>
<script type="text/javascript" src="js/map.js"></script>
<script type="text/javascript" src="js/addZoneVue.js"></script>
<script type="text/javascript" src="js/search.js"></script>
<script type="text/javascript" src="js/zones.js"></script>

</html>